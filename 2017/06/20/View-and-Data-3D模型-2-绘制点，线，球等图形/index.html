<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>View and Data 3D模型(2) -- 绘制点，线，球等图形 - 张正华 - 个人博客</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com/zhanglake"><span>Github</span></a></li><li><a href="https://segmentfault.com/u/zhanglake"><span>segmentfault</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="/image/background_2.jpg"><div class="post-title"><h1 class="title">View and Data 3D模型(2) -- 绘制点，线，球等图形</h1><ul class="meta"><li><i class="icon icon-author"></i>张正华</li><li><i class="icon icon-clock"></i>9 Minutes</li><li><i class="icon icon-calendar"></i>June 20, 2017</li></ul></div></div><div class="article-content" style="max-width:800px"><h2 id="View-and-Data-3D模型-2-–-绘制点，线，球等图形"><a href="#View-and-Data-3D模型-2-–-绘制点，线，球等图形" class="headerlink" title="View and Data 3D模型(2) – 绘制点，线，球等图形"></a>View and Data 3D模型(2) – 绘制点，线，球等图形</h2><blockquote>
<p>这个绘图操作是利用<code>three.js</code>的绘画方法，具体可见<a href="https://threejs.org/docs/index.html#manual/introduction/Creating-a-scene" target="_blank" rel="noopener">API</a><br>这里是一个小<a href="https://github.com/zhanglake/View-and-Data-plugins" target="_blank" rel="noopener">Demo</a></p>
</blockquote>
<h2 id="绘画点"><a href="#绘画点" class="headerlink" title="绘画点"></a>绘画点</h2><h3 id="1-创建形状对象"><a href="#1-创建形状对象" class="headerlink" title="1. 创建形状对象"></a>1. 创建形状对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var geometry = new THREE.Geometry();</span><br></pre></td></tr></table></figure>
<h3 id="2-给该对象设置3个坐标-x-y-z-，-0-0-0-代表三维画布的中心点"><a href="#2-给该对象设置3个坐标-x-y-z-，-0-0-0-代表三维画布的中心点" class="headerlink" title="2. 给该对象设置3个坐标(x,y,z)，(0,0,0)代表三维画布的中心点"></a>2. 给该对象设置3个坐标(x,y,z)，(0,0,0)代表三维画布的中心点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geometry.vertices.push(new THREE.Vector3(50, 100, 150));</span><br></pre></td></tr></table></figure>
<h3 id="3-设置要绘画点的属性，具体信息详见THREE-PointCloudMaterial的API"><a href="#3-设置要绘画点的属性，具体信息详见THREE-PointCloudMaterial的API" class="headerlink" title="3. 设置要绘画点的属性，具体信息详见THREE.PointCloudMaterial的API"></a>3. 设置要绘画点的属性，具体信息详见<code>THREE.PointCloudMaterial</code>的API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var material = new THREE.PointCloudMaterial(&#123;</span><br><span class="line">    color: 0x00ff00,        // 颜色是16进制数字</span><br><span class="line">    size: 2</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：在3D世界中是没有单位的概念的，即使size设置为100，webgl也不知道应该在屏幕中占据多少像素。 WebGLRenderer是不支持线宽度的，所以如果要画线并设置宽度请用CanvasRenderer，它是用二维canvas画布模拟3D效果，所以能够设置宽度。</p>
</blockquote>
<h3 id="4-绘画点"><a href="#4-绘画点" class="headerlink" title="4. 绘画点"></a>4. 绘画点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var mypoint = new THREE.PointCloud(geometry, material);</span><br></pre></td></tr></table></figure>
<h3 id="5-将图形放入界面中，并且刷新画布"><a href="#5-将图形放入界面中，并且刷新画布" class="headerlink" title="5. 将图形放入界面中，并且刷新画布"></a>5. 将图形放入界面中，并且刷新画布</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">viewer.impl.scene.add(mypoint);</span><br><span class="line">viewer.impl.invalidate(true);</span><br></pre></td></tr></table></figure>
<h2 id="绘画线"><a href="#绘画线" class="headerlink" title="绘画线"></a>绘画线</h2><p>两点定义一条直线，所以要绘制直线只要绘制两个点就行</p>
<h3 id="1-创建形状对象-1"><a href="#1-创建形状对象-1" class="headerlink" title="1. 创建形状对象"></a>1. 创建形状对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var geometry = new THREE.Geometry();</span><br></pre></td></tr></table></figure>
<h3 id="2-绘制两个点的对象"><a href="#2-绘制两个点的对象" class="headerlink" title="2. 绘制两个点的对象"></a>2. 绘制两个点的对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">geometry.vertices.push(new THREE.Vector3(10, 100, 150));</span><br><span class="line">geometry.vertices.push(new THREE.Vector3(50, 100, 150));</span><br></pre></td></tr></table></figure>
<h3 id="3-设置要绘画线条的属性，具体信息详见THREE-LineDashedMaterial的API"><a href="#3-设置要绘画线条的属性，具体信息详见THREE-LineDashedMaterial的API" class="headerlink" title="3. 设置要绘画线条的属性，具体信息详见THREE.LineDashedMaterial的API"></a>3. 设置要绘画线条的属性，具体信息详见<code>THREE.LineDashedMaterial</code>的API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var material = new THREE.LineDashedMaterial(&#123;</span><br><span class="line">    color: 0x00ff00,        // 颜色是16进制数字</span><br><span class="line">    linewidth: 2</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：同点的size一样，linewidth是否起作用也是根据render而决定的</p>
</blockquote>
<h3 id="4-绘画线"><a href="#4-绘画线" class="headerlink" title="4. 绘画线"></a>4. 绘画线</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var line = new THREE.Line(geometry, material);</span><br></pre></td></tr></table></figure>
<h3 id="5-将图形放入界面中，并且刷新画布-1"><a href="#5-将图形放入界面中，并且刷新画布-1" class="headerlink" title="5. 将图形放入界面中，并且刷新画布"></a>5. 将图形放入界面中，并且刷新画布</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">viewer.impl.scene.add(line);</span><br><span class="line">viewer.impl.invalidate(true);</span><br></pre></td></tr></table></figure>
<h2 id="绘画球"><a href="#绘画球" class="headerlink" title="绘画球"></a>绘画球</h2><p>绘画球有很多用处，在这里我是把它作为一个标志进行BIM上的标记，因为point无法设置size，起不到醒目的效果</p>
<h3 id="1-创建形状对象，并且设置基本参数，其中radius是球的半径，具体参数可以查看THREE-SphereGeometry的API"><a href="#1-创建形状对象，并且设置基本参数，其中radius是球的半径，具体参数可以查看THREE-SphereGeometry的API" class="headerlink" title="1. 创建形状对象，并且设置基本参数，其中radius是球的半径，具体参数可以查看THREE.SphereGeometry的API"></a>1. 创建形状对象，并且设置基本参数，其中<code>radius</code>是球的半径，具体参数可以查看<code>THREE.SphereGeometry</code>的API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var radius = 3, segemnt = 10, rings = 10;</span><br><span class="line">var geometry = new THREE.SphereGeometry(radius, segemnt, rings);</span><br></pre></td></tr></table></figure>
<h3 id="2-设置球的一些外观参数"><a href="#2-设置球的一些外观参数" class="headerlink" title="2. 设置球的一些外观参数"></a>2. 设置球的一些外观参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var sphereMaterial = new THREE.MeshLambertMaterial (&#123;</span><br><span class="line">    color: 0xff0000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="3-绘画球的对象"><a href="#3-绘画球的对象" class="headerlink" title="3. 绘画球的对象"></a>3. 绘画球的对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var sphere = new THREE.Mesh(geometry, sphereMaterial);</span><br></pre></td></tr></table></figure>
<h3 id="4-定义球心位置"><a href="#4-定义球心位置" class="headerlink" title="4. 定义球心位置"></a>4. 定义球心位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sphere.position.x = 50;</span><br><span class="line">sphere.position.y = 100;</span><br><span class="line">sphere.position.z = 150;</span><br></pre></td></tr></table></figure>
<h3 id="5-将图形放入界面中，并且刷新画布-2"><a href="#5-将图形放入界面中，并且刷新画布-2" class="headerlink" title="5. 将图形放入界面中，并且刷新画布"></a>5. 将图形放入界面中，并且刷新画布</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">viewer.impl.scene.add(sphere);</span><br><span class="line">viewer.impl.invalidate(true);</span><br></pre></td></tr></table></figure></div><div class="article-meta" style="max-width:800px"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/View-and-Data/">View and Data</a><span class="tag-list-count">2</span></li></ul></div></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2017/08/14/Mybatis-Mapper使用/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2017/06/20/View-and-Data-3D模型-1-创建模型/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/zhanglake" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://segmentfault.com/u/zhanglake" title="segmentfault" target="_blank"><i class="icon icon-segmentfault"></i></a></li><li><a href="https://segmentfault.com/u/zhanglake" title="wechat" target="_blank"><i class="icon icon-wechat"></i></a></li><li><a href="http://weibo.com/u/1211393407" title="weibo" target="_blank"><i class="icon icon-weibo"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2017 张正华 - 个人博客</p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>